{"version":3,"sources":["constants/actionTypes.js","selectors/images.js","reducers/initialState.js","reducers/index.js","reducers/imageReducer.js","reducers/videoReducer.js","API/api.js","sagas/imagesSaga.js","sagas/videosSaga.js","sagas/watcher.js","sagas/index.js","store/configureStore.js","components/styled-components/Navigation.js","components/common/Header.js","components/App.js","actions/mediaActions.js","components/ErrorMsg.js","components/common/Loader.js","components/styled-components/MainContainer.js","components/styled-components/SpinnerContainer.js","components/PhotosPage.js","components/VideosPage.js","routes.js","index.js"],"names":["FLICKR_IMAGES_SUCCESS","FLICKR_VIDEOS_SUCCESS","SEARCH_IMAGES_REQUEST","SEARCH_VIDEOS_REQUEST","SEARCH_IMAGES_ERROR","SEARCH_VIDEOS_ERROR","PAGES_COUNT","getPageNum","state","Map","getIn","initialState","images","photos","pageNum","videos","rootReducer","combineReducers","arguments","length","undefined","action","type","types","newState","updateIn","arr","concat","saveImages","val","savePageNum","Object","objectSpread","error","toConsumableArray","REACT_APP_FLICKR_API_KEY","process","REACT_APP_FLICKR_USER_ID","REACT_APP_FLICKR_PHOTOSET_ID","REACT_APP_FLICKR_VIDEOSET_ID","flickrImages","_x","_flickrImages","apply","this","_callee","PHOTOSET_INFO_ENDPOINT","fetchedInfo","lastPageNum","page","GET_PHOTOS_ENDPOINT","fetchedData","regenerator_default","a","wrap","_context","prev","next","fetch","sent","json","Math","ceil","photoset","count_photos","abrupt","photo","reverse","map","_ref","farm","server","id","secret","title","url_o","height_o","width_o","datetaken","mediaUrl","width","height","oUrl","stop","flickrVideos","_flickrVideos","_callee2","FLICKR_API_ENDPOINT","_context2","_ref2","imagesSaga","arg","reducedByScrollPageNum","call","all","put","t0","_marked","videosSaga","videosSaga_marked","watchImagesMedia","watchVideosMedia","takeLatest","watcher_marked","_marked2","startForeman","fork","sagas_marked","configureStore","sagaMiddleware","createSagaMiddleware","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","applyMiddleware","runSaga","run","rootSaga","Navigation","styled","ul","_templateObject","Header","react_default","createElement","styled_components_Navigation","es","to","activeClassName","className","aria-hidden","App","common_Header","props","children","Component","searchImagesAction","ErrorMsg","div","ErrorMsg_templateObject","Loader","MainContainer","MainContainer_templateObject","SpinnerContainer","SpinnerContainer_templateObject","PhotosPage","_Component","_getPrototypeOf2","_this","classCallCheck","_len","args","Array","_key","possibleConstructorReturn","getPrototypeOf","getScrollPercent","document","documentElement","scrollTop","body","scrollHeight","clientHeight","fetchNewDataChunk","executed","dispatch","inherits","createClass","key","value","_this2","_this$props","imagesError","config","containerWidth","innerWidth","containerPadding","top","right","bottom","left","sizes","image","geometry","justifiedLayout","onscroll","components_ErrorMsg","boxes","styled_components_MainContainer","style","containerHeight","i","react_lazyload_lib_default","href","src","alt","styled_components_SpinnerContainer","common_Loader","connect","VideosPage","videosError","forceAspectRatio","from","video","video_react_lib","playsInline","routes","path","component","store","ReactDOM","render","react_redux_es","history","browserHistory","getElementById"],"mappings":"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","file":"static/js/main.75f2ba95.chunk.js","sourcesContent":["/**\r\n * Created by Mihail on 1/7/2017.\r\n */\r\nexport const SELECTED_IMAGE = 'SELECTED_IMAGE'\r\nexport const FLICKR_IMAGES_SUCCESS = 'FLICKR_IMAGES_SUCCESS'\r\nexport const SELECTED_VIDEO = 'SELECTED_VIDEO'\r\nexport const FLICKR_VIDEOS_SUCCESS = 'FLICKR_VIDEOS_SUCCESS'\r\nexport const SEARCH_IMAGES_REQUEST = 'SEARCH_IMAGES_REQUEST'\r\nexport const SEARCH_VIDEOS_REQUEST = 'SEARCH_VIDEOS_REQUEST'\r\nexport const SEARCH_IMAGES_ERROR = 'SEARCH_IMAGES_ERROR'\r\nexport const SEARCH_VIDEOS_ERROR = 'SEARCH_VIDEOS_ERROR'\r\nexport const PAGES_COUNT = 'PAGES_COUNT'","import { Map } from 'immutable'\r\n\r\nexport function getPhotos(state) {\r\n  const immutableState = Map(state)\r\n  return immutableState.getIn(['photos'], null)\r\n}\r\n\r\nexport function getPageNum(state) {\r\n  const immutableState = Map(state)\r\n  return immutableState.getIn(['pageNum'], null)\r\n}\r\n\r\nexport function saveImages(state, newState) {\r\n  const immutableState = Map(state)\r\n  return immutableState.updateIn(['photos'], arr => {\r\n    return arr.concat(newState)\r\n  })\r\n}\r\n\r\nexport function savePageNum(state, newState) {\r\n  const immutableState = Map(state)\r\n  return immutableState.updateIn(['pageNum'], val => newState)\r\n}","import { Map } from 'immutable'\r\n\r\nexport default {\r\n\timages: Map({\r\n    photos: [],\r\n    pageNum: 1\r\n  }),\r\n\tvideos: []\r\n}","import { combineReducers } from 'redux'\r\nimport images from './imageReducer'\r\nimport videos from './videoReducer'\r\n\r\nconst rootReducer = combineReducers({\r\n\timages,\r\n\tvideos\r\n})\r\n\r\nexport default rootReducer","import * as types from '../constants/actionTypes'\r\nimport { saveImages, savePageNum } from '../selectors/images'\r\nimport initialState from './initialState'\r\n\r\nexport default function (state = initialState.images, action) {\r\n  switch (action.type) {\r\n    case types.FLICKR_IMAGES_SUCCESS:\r\n      return saveImages(state, action.images)\r\n    case types.PAGES_COUNT:\r\n      return savePageNum(state, action.pageNum)\r\n    case types.SEARCH_IMAGES_ERROR:\r\n      return {...state, error: action.error}\r\n    default:\r\n      return state\r\n  }\r\n}","/**\r\n * Created by Mihail on 1/7/2017.\r\n */\r\nimport initialState from './initialState'\r\nimport * as types from '../constants/actionTypes'\r\n\r\nexport default function (state = initialState.videos, action) {\r\n  switch (action.type) {\r\n    case types.FLICKR_VIDEOS_SUCCESS:\r\n      return [...state, action.videos]\r\n    case types.SEARCH_VIDEOS_ERROR:\r\n      return {...state, error: action.error}\r\n    default:\r\n      return state\r\n  }\r\n}","/**\n * Created by Mihail on 1/7/2017.\n */\n\nconst REACT_APP_FLICKR_API_KEY = process.env.REACT_APP_FLICKR_API_KEY\nconst REACT_APP_FLICKR_USER_ID = process.env.REACT_APP_FLICKR_USER_ID\nconst REACT_APP_FLICKR_PHOTOSET_ID = process.env.REACT_APP_FLICKR_PHOTOSET_ID\nconst REACT_APP_FLICKR_VIDEOSET_ID = process.env.REACT_APP_FLICKR_VIDEOSET_ID\n\nexport async function flickrImages(pageNum) {\n  const PHOTOSET_INFO_ENDPOINT = `https://api.flickr.com/services/rest/?method=flickr.photosets.getInfo&api_key=${REACT_APP_FLICKR_API_KEY}&photoset_id=${REACT_APP_FLICKR_PHOTOSET_ID}&user_id=${REACT_APP_FLICKR_USER_ID}&format=json&nojsoncallback=1`\n\n  let fetchedInfo = await fetch(PHOTOSET_INFO_ENDPOINT)\n  fetchedInfo = await fetchedInfo.json()\n  const lastPageNum = Math.ceil(fetchedInfo.photoset.count_photos / 100) || 1\n\n  const page = pageNum !== undefined ? pageNum : lastPageNum\n\n  let GET_PHOTOS_ENDPOINT = `https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos\n\t&api_key=${REACT_APP_FLICKR_API_KEY}\n\t&format=json\n\t&nojsoncallback=1\n\t&per_page=100\n\t&page=${page}\n\t&user_id=${REACT_APP_FLICKR_USER_ID}\n\t&photoset_id=${REACT_APP_FLICKR_PHOTOSET_ID}\n\t&extras=date_taken,o_dims,url_o`\n\n  let fetchedData = await fetch(GET_PHOTOS_ENDPOINT)\n  fetchedData = await fetchedData.json()\n  return {\n    photos: fetchedData.photoset.photo.reverse().map(({farm, server, id, secret, title, url_o, height_o, width_o, datetaken}) => ({\n      id,\n      title,\n      mediaUrl: `https://farm${farm}.staticflickr.com/${server}/${id}_${secret}.jpg`,\n      width: width_o,\n      height: height_o,\n      oUrl: url_o,\n      datetaken\n    })),\n    pageNum: lastPageNum\n  }\n}\n\nexport async function flickrVideos() {\n  const FLICKR_API_ENDPOINT = `https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos\n\t&api_key=${REACT_APP_FLICKR_API_KEY}\n\t&format=json\n\t&nojsoncallback=1\n\t&per_page=100\n\t&user_id=${REACT_APP_FLICKR_USER_ID}\n\t&photoset_id=${REACT_APP_FLICKR_VIDEOSET_ID}\n\t&extras=date_upload`\n\n  let fetchedData = await fetch(FLICKR_API_ENDPOINT)\n  fetchedData = await fetchedData.json()\n  return fetchedData.photoset.photo.reverse().map(({id, secret, title}) => ({\n    id,\n    title,\n    mediaUrl: `https://www.flickr.com/photos/${REACT_APP_FLICKR_USER_ID}/${id}/play/site/${secret}`\n  }))\n}","/**\r\n * Created by Mihail on 1/7/2017.\r\n */\r\nimport { put, call, all } from 'redux-saga/effects'\r\nimport { flickrImages } from '../API/api'\r\nimport * as types from '../constants/actionTypes'\r\n\r\nexport default function* imagesSaga(arg) {\r\n  const reducedByScrollPageNum = arg ? arg.pageNum : undefined\r\n  try {\r\n    const {photos, pageNum} = yield call(flickrImages, reducedByScrollPageNum)\r\n\r\n    yield all(\r\n      [\r\n        put({type: types.FLICKR_IMAGES_SUCCESS, images: photos}),\r\n        put({type: types.PAGES_COUNT, pageNum: reducedByScrollPageNum || pageNum})\r\n      ]\r\n    )\r\n  } catch (error) {\r\n    yield put({\r\n      type: types.SEARCH_IMAGES_ERROR,\r\n      error: 'An error occurred during fetching the images. Please try again later or contact me at mihail.gaberov@gmail.com'\r\n    })\r\n  }\r\n}","/**\n * Created by Mihail on 1/7/2017.\n */\nimport { put, call, all } from 'redux-saga/effects'\nimport { flickrVideos } from '../API/api'\nimport * as types from '../constants/actionTypes'\n\nexport default function* videosSaga() {\n  try {\n    const {videos} = yield all({\n      videos: call(flickrVideos)\n    })\n    yield all(\n      [\n        put({type: types.FLICKR_VIDEOS_SUCCESS, videos}),\n      ]\n    )\n  } catch (error) {\n    yield put({\n      type: types.SEARCH_VIDEOS_ERROR,\n      error: 'An error occurred during fetching the videos. ' +\n      'Please try again later or contact me at mihail.gaberov@gmail.com'\n    })\n  }\n}","/**\r\n * Created by Mihail on 1/7/2017.\r\n */\r\nimport { takeLatest } from 'redux-saga/effects'\r\nimport imagesSaga from './imagesSaga'\r\nimport videosSaga from './videosSaga'\r\nimport * as types from '../constants/actionTypes'\r\n\r\nexport default function* watchImagesMedia() {\r\n  yield takeLatest(types.SEARCH_IMAGES_REQUEST, imagesSaga)\r\n}\r\n\r\nexport function* watchVideosMedia() {\r\n  yield takeLatest(types.SEARCH_VIDEOS_REQUEST, videosSaga)\r\n}","/**\r\n * Created by Mihail on 1/8/2017.\r\n */\r\nimport { fork } from 'redux-saga/effects'\r\nimport watchImagesMedia from './watcher'\r\nimport { watchVideosMedia } from './watcher'\r\n\r\nexport default function* startForeman() {\r\n  yield fork(watchImagesMedia)\r\n  yield fork(watchVideosMedia)\r\n}","/**\r\n * Created by Mihail on 1/7/2017.\r\n */\r\nimport { createStore, applyMiddleware } from 'redux'\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport rootReducer from '../reducers'\r\nimport rootSaga from '../sagas'\r\n\r\nconst configureStore = () => {\r\n  const sagaMiddleware = createSagaMiddleware()\r\n  return {\r\n    ...createStore(rootReducer,\r\n      window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n      applyMiddleware(sagaMiddleware)),\r\n    runSaga: sagaMiddleware.run(rootSaga)\r\n  }\r\n}\r\n\r\nexport default configureStore","import styled from 'styled-components'\r\n\r\nconst Navigation = styled.ul`\r\n  width: 100%;\r\n  z-index: 1;\r\n  position: fixed;\r\n  top: 0;\r\n  overflow: hidden;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  list-style-type: none;\r\n  margin: 0;\r\n  padding: 0;\r\n  background-color: #333;\r\n  \r\n  li {\r\n    width: 100%;\r\n    a {\r\n      display: block;\r\n      color: white;\r\n      text-align: center;\r\n      padding: 14px 16px;\r\n      text-decoration: none;\r\n        \r\n      &:hover {\r\n        background-color: #111;\r\n      }\r\n      \r\n      &.active {\r\n        background-color: #111;\r\n        border-bottom: 3px solid #ccc;\r\n      }\r\n      \r\n      i {\r\n        float: left;\r\n      }\r\n    }  \r\n  }\r\n`\r\n\r\nexport default Navigation","/**\r\n * Created by Mihail on 1/6/2017.\r\n */\r\nimport React from 'react'\r\nimport { Link, IndexLink } from 'react-router'\r\nimport Navigation from '../styled-components/Navigation'\r\n\r\nconst Header = () => (\r\n\t<Navigation>\r\n    <li>\r\n      <IndexLink to=\"/\" activeClassName=\"active\">\r\n        <i className=\"fa fa-camera-retro\" aria-hidden=\"true\"></i>Photos</IndexLink>\r\n    </li>\r\n    <li>\r\n      <Link to=\"videos\" activeClassName=\"active\">\r\n        <i className=\"fa fa-video-camera\" aria-hidden=\"true\"></i>Videos</Link>\r\n    </li>\r\n\t</Navigation>\r\n)\r\n\r\nexport default Header","/**\r\n * Created by Mihail on 1/6/2017.\r\n */\r\nimport React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Header from './common/Header'\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Header/>\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  children: PropTypes.object.isRequired\r\n}\r\n\r\nexport default App","/**\r\n * Created by Mihail on 1/7/2017.\r\n */\r\nimport * as types from '../constants/actionTypes'\r\n\r\nexport const selectImageAction = (image) => ({\r\n  type: types.SELECTED_IMAGE,\r\n  image\r\n})\r\n\r\nexport const selectVideoAction = (video) => ({\r\n  type: types.SELECTED_VIDEO,\r\n  video\r\n})\r\n\r\nexport const searchImagesAction = (pageNum) => ({\r\n  type: types.SEARCH_IMAGES_REQUEST,\r\n  pageNum\r\n})\r\n\r\nexport const searchVideosAction = () => ({\r\n  type: types.SEARCH_VIDEOS_REQUEST\r\n})","/**\n * Created by Mihail on 6/4/2017.\n */\nimport styled from 'styled-components'\n\nconst ErrorMsg = styled.div`\n color: red;\n font-weight: bold;\n`\n\nexport default ErrorMsg","import React from 'react'\r\n\r\nconst Loader = () => (\r\n  <i className=\"fa fa-circle-o-notch fa-spin fa-3x fa-fw\"></i>\r\n)\r\n\r\nexport default Loader","import styled from 'styled-components'\r\n\r\nconst MainContainer = styled.div`\r\n  text-align: center;\r\n  margin-top: 48px;\r\n  \r\n  a {\r\n    text-decoration: none;\r\n    position: relative;\r\n    \r\n    h2 { \r\n      position: absolute; \r\n      bottom: 0; \r\n      right: 0; \r\n  \r\n      span {\r\n        font: bold 16px/33px Helvetica, Sans-Serif; \r\n        letter-spacing: -1px;  \r\n        background: rgb(0, 0, 0); /* fallback color */\r\n        background: rgba(0, 0, 0, 0.7);\r\n        padding: 10px; \r\n        position: relative;\r\n        left: 0;\r\n        bottom: 21px;\r\n        color: white;\r\n      }\r\n    }\r\n  }  \r\n    \r\n  img {\r\n    margin: 0 2px;\r\n  }\r\n`\r\n\r\nexport default MainContainer","import styled from 'styled-components'\r\n\r\nconst SpinnerContainer = styled.div`\r\n    width: 100%;\r\n    min-height: 220px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    \r\n    i {\r\n      color: white;\r\n    }\r\n`\r\n\r\nexport default SpinnerContainer","import justifiedLayout from 'justified-layout'\r\nimport PropTypes from 'prop-types'\r\nimport React, { Component } from 'react'\r\nimport LazyLoad from 'react-lazyload'\r\nimport { connect } from 'react-redux'\r\nimport { searchImagesAction } from '../actions/mediaActions'\r\nimport ErrorMsg from '../components/ErrorMsg'\r\nimport Loader from './common/Loader'\r\nimport { getPageNum, getPhotos } from '../selectors/images'\r\nimport '../styles/style.css'\r\nimport MainContainer from './styled-components/MainContainer'\r\nimport SpinnerContainer from './styled-components/SpinnerContainer'\r\n\r\nexport class PhotosPage extends Component {\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(searchImagesAction())\r\n  }\r\n\r\n  getScrollPercent = () => (\r\n    (document.documentElement.scrollTop || document.body.scrollTop)\r\n    / ((document.documentElement.scrollHeight || document.body.scrollHeight)\r\n      - document.documentElement.clientHeight) * 100\r\n  )\r\n\r\n  fetchNewDataChunk = () => {\r\n    let executed = false\r\n    return (pageNum) => {\r\n      if (!executed) {\r\n        executed = true\r\n        this.props.dispatch(searchImagesAction(--pageNum))\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    let { pageNum } = this.props\r\n    const { images, imagesError } = this.props\r\n    const config = {\r\n      containerWidth: window.innerWidth,\r\n      containerPadding: {\r\n        top: 0,\r\n        right: 14,\r\n        bottom: 0,\r\n        left: 14\r\n      }\r\n    }\r\n    const sizes = images ? images.map((image) => {\r\n      return {\r\n        width: image.width,\r\n        height: image.height\r\n      }\r\n    }) : []\r\n    const geometry = justifiedLayout(sizes, config)\r\n\r\n    window.onscroll = () => {\r\n      if (this.getScrollPercent() > 98 && pageNum > 1) {\r\n        this.fetchNewDataChunk()(pageNum)\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        {!imagesError ?\r\n          images && geometry.boxes.length > 0 ?\r\n            <MainContainer style={{ height: geometry.containerHeight + 'px' }}>\r\n              {images.map((image, i) => (\r\n                <LazyLoad key={i}\r\n                          height={geometry.boxes[i].height}>\r\n                  <a href={image.oUrl}>\r\n                    <img src={image.mediaUrl}\r\n                         alt={image.datetaken}\r\n                         title={image.datetaken}\r\n                         style={\r\n                           {\r\n                             width: `${geometry.boxes[i].width}px`,\r\n                             top: `${geometry.boxes[i].top}px`,\r\n                             left: `${geometry.boxes[i].left}px`\r\n                           }\r\n                         }\r\n                    />\r\n                    <h2><span>{image.datetaken}</span></h2>\r\n                  </a>\r\n                </LazyLoad>\r\n              ))}\r\n            </MainContainer>\r\n            :\r\n            <SpinnerContainer>\r\n              <Loader />\r\n            </SpinnerContainer>\r\n          : <ErrorMsg>{imagesError}</ErrorMsg>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nPhotosPage.propTypes = {\r\n  images: PropTypes.oneOfType([\r\n    PropTypes.array,\r\n    PropTypes.object\r\n  ]),\r\n  dispatch: PropTypes.func.isRequired,\r\n  imagesError: PropTypes.string\r\n}\r\n\r\nconst mapStateToProps = ({ images, error }) => ({\r\n  images: getPhotos(images),\r\n  pageNum: getPageNum(images),\r\n  imagesError: error\r\n})\r\n\r\nexport default connect(mapStateToProps)(PhotosPage)","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport justifiedLayout from 'justified-layout'\r\nimport LazyLoad from 'react-lazyload'\r\nimport { connect } from 'react-redux'\r\nimport { Player } from 'video-react'\r\nimport { searchVideosAction } from '../actions/mediaActions'\r\nimport ErrorMsg from '../components/ErrorMsg'\r\nimport '../styles/style.css'\r\nimport Loader from './common/Loader'\r\nimport MainContainer from './styled-components/MainContainer'\r\nimport SpinnerContainer from './styled-components/SpinnerContainer'\r\nimport '../../node_modules/video-react/dist/video-react.css'\r\n\r\n\r\nexport class VideosPage extends Component {\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(searchVideosAction())\r\n  }\r\n\r\n  render() {\r\n    const { videos, videosError } = this.props\r\n    const config = {\r\n      containerWidth: window.innerWidth,\r\n      forceAspectRatio: 1,\r\n      containerPadding: {\r\n        top: 0,\r\n        right: 14,\r\n        bottom: 0,\r\n        left: 14\r\n      }\r\n    }\r\n    const sizes = videos ? Array.from(new Array(videos.length), () => 1) : []\r\n    const geometry = justifiedLayout(sizes, config)\r\n\r\n    return (\r\n      <div>\r\n        {!videosError ?\r\n          videos && geometry.boxes.length > 0 ?\r\n            <MainContainer style={{ height: geometry.containerHeight + 'px' }}>\r\n              {videos.map((video, i) => (\r\n                <LazyLoad key={i}\r\n                          height={geometry.boxes[i].height}>\r\n                  <Player\r\n                    style={\r\n                      {\r\n                        width: `${geometry.boxes[i].width}px`,\r\n                        top: `${geometry.boxes[i].top}px`,\r\n                        left: `${geometry.boxes[i].left}px`\r\n                      }}\r\n                    playsInline\r\n                  >\r\n                    <source src={video.mediaUrl}/>\r\n                  </Player>\r\n                </LazyLoad>\r\n              ))}\r\n            </MainContainer>\r\n            :\r\n            <SpinnerContainer>\r\n              <Loader/>\r\n            </SpinnerContainer>\r\n          : <ErrorMsg>{videosError}</ErrorMsg>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nVideosPage.propTypes = {\r\n  videos: PropTypes.array,\r\n  dispatch: PropTypes.func.isRequired,\r\n  videosError: PropTypes.string\r\n}\r\n\r\nconst mapStateToProps = ({ videos, error }) => ({\r\n  videos: videos[0],\r\n  videosError: error\r\n})\r\n\r\nexport default connect(mapStateToProps)(VideosPage)\r\n","/**\r\n * Created by Mihail on 1/6/2017.\r\n */\r\nimport React from 'react'\r\nimport { IndexRoute, Route } from 'react-router'\r\nimport App from './components/App'\r\nimport PhotosPage from './components/PhotosPage'\r\nimport VideosPage from './components/VideosPage'\r\n\r\nexport default (\r\n  <Route path=\"/\" component={App}>\r\n    <IndexRoute component={PhotosPage}/>\r\n    <Route path=\"videos\" component={VideosPage}/>\r\n  </Route>\r\n)","/**\r\n * Created by Mihail on 1/6/2017.\r\n */\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { Router, browserHistory } from 'react-router'\r\nimport { Provider } from 'react-redux'\r\nimport configureStore from './store/configureStore'\r\nimport routes from './routes'\r\n\r\nconst store = configureStore()\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<Router history={browserHistory} routes={routes} />\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n)"],"sourceRoot":""}